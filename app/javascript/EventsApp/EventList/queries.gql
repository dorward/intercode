#import "../queries.gql"

query EventListCommonDataQuery {
  convention {
    id
    ...CommonConventionData
  }

  currentAbility {
    can_read_schedule
  }
}

query EventListEventsQuery($page: Int, $pageSize: Int, $filters: EventFiltersInput, $sort: [SortInput!]) {
  convention {
    id
    ...CommonConventionData

    events_paginated(page: $page, per_page: $pageSize, filters: $filters, sort: $sort) {
      total_entries
      total_pages
      current_page
      per_page

      entries {
        id
        title
        created_at
        short_blurb_html
        form_response_attrs_json

        event_category {
          id
          name
          team_member_name
        }

        runs {
          id
          starts_at
        }

        team_members {
          id

          user_con_profile {
            id
            last_name
            name_without_nickname
          }
        }
      }
    }
  }
}
