fragment ScheduleGridConventionDataFragment on Query {
  convention {
    starts_at
    ends_at
    timezone_name
  }
}

fragment ScheduleGridEventsFragment on Query {
  events(extendedCounts: $extendedCounts, start: $start, finish: $finish) {
    id
    title
    length_seconds
    category
    short_blurb_html
    event_page_url

    registration_policy {
      slots_limited
      only_uncounted
      total_slots
      total_slots_including_not_counted
      preferred_slots @include(if: $extendedCounts)
      preferred_slots_including_not_counted @include(if: $extendedCounts)
      minimum_slots @include(if: $extendedCounts)
      minimum_slots_including_not_counted @include(if: $extendedCounts)
    }

    runs(start: $start, finish: $finish) {
      id
      starts_at
      schedule_note
      title_suffix

      confirmed_limited_signup_count
      not_counted_confirmed_signup_count
      confirmed_signup_count @include(if: $extendedCounts)
      waitlisted_signup_count @include(if: $extendedCounts)
      not_counted_signup_count @include(if: $extendedCounts)

      room_names

      my_signups {
        state
      }
    }
  }
}

query ScheduleGridConventionDataQuery {
  ...ScheduleGridConventionDataFragment
}

query ScheduleGridEventsQuery($extendedCounts: Boolean!, $start: Date, $finish: Date) {
  ...ScheduleGridEventsFragment
}

query ScheduleGridCombinedQuery($extendedCounts: Boolean!, $start: Date, $finish: Date) {
  ...ScheduleGridConventionDataFragment
  ...ScheduleGridEventsFragment
}

query ConventionEventCategoryKeysQuery {
  convention {
    id
    event_category_keys
  }
}
